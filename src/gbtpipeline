#!/bin/bash


fullpath=`readlink -f $0`
me=`dirname $fullpath`

if [ $me = "/home/gbtpipeline/integration" ]; then
	echo "!!!!!!!!!! TEST VERSION !!!!!!!!!!!!"

        source /home/scratch/jmasters/pipeline-install-1345495249/pipeline-env/bin/activate

elif [ $me = "/home/gbtpipeline/release" ]; then

	if [[ "$PATH" != */home/gbtpipeline/release* ]]
	then
		PATH=/home/gbt7/norman/bin:"$PATH"
		PATH=/home/gbtpipeline/release/tools:"$PATH"
		PATH=/home/gbtpipeline/release:"$PATH"
	fi
	
	if [ -z "$PYTHONPATH" ]
	then
		PYTHONPATH=/home/gbtpipeline/release/contrib
		PYTHONPATH=/home/gbtpipeline/release:"$PYTHONPATH"
	else
		lclpythonpath="$PYTHONPATH"
		if [[ $lclpythonpath != */home/gbtpipeline/release* ]]
		then
			PYTHONPATH=/home/gbtpipeline/release/contrib:"$PYTHONPATH"
			PYTHONPATH=/home/gbtpipeline/release:"$PYTHONPATH"
		fi
	fi

elif [ $me = "/home/gbtpipeline/old" ]; then

    if [[ "$PATH" != */home/gbtpipeline/old* ]]
    then
        PATH=/home/gbt7/norman/bin:"$PATH"
        PATH=/home/gbtpipeline/old/tools:"$PATH"
        PATH=/home/gbtpipeline/old:"$PATH"
    fi

    if [ -z "$PYTHONPATH" ]
    then
        PYTHONPATH=/home/gbtpipeline/old/contrib
        PYTHONPATH=/home/gbtpipeline/old:"$PYTHONPATH"
    else
        lclpythonpath="$PYTHONPATH"
        if [[ $lclpythonpath != */home/gbtpipeline/old* ]]
        then
            PYTHONPATH=/home/gbtpipeline/old/contrib:"$PYTHONPATH"
            PYTHONPATH=/home/gbtpipeline/old:"$PYTHONPATH"
        fi
    fi

fi

export PATH
export PYTHONPATH

if [ $# -gt 0 ]; then
    echo "gbtpipeline" $*
fi

gbt_pipeline.py $*
